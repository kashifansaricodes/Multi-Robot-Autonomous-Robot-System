# MULTI-ROBOT MAP MERGING      [Code: MuRoMM]




![CICD Workflow status](https://github.com/Abhishek260101/Warehouse-Autonomous-Robot-System/actions/workflows/run-unit-test-and-upload-codecov.yml/badge.svg) [![codecov](https://codecov.io/gh/Abhishek260101/Warehouse-Autonomous-Robot-System/graph/badge.svg?token=813CD16HJ6)](https://codecov.io/gh/Abhishek260101/Warehouse-Autonomous-Robot-System)[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)



![Screenshot from 2024-11-25 18-22-57](https://github.com/user-attachments/assets/28cdfd28-a9a3-421e-9036-5036623a605d)

![Screenshot from 2024-12-03 22-12-22](https://github.com/user-attachments/assets/1dbd852e-a369-46d4-9235-1405306669f1)


## Resources

- **Video Demonstration**: [View on Google Drive](https://drive.google.com/file/d/1XcQE9ShOaLuXS3wf0k5WA8yWZw5_CSXs/view?usp=sharing)
- **Backlog**: [View the Backlog Spreadsheet](https://docs.google.com/spreadsheets/d/1bFknVXY7FlzeFsWu55ukKkjZbq8C_RPbGdnfwVOcJKI/edit?usp=sharing)
- **Sprint Plan**: [View the Sprint Plan Document](https://docs.google.com/document/d/1ba09P1LtX2oa4Xgsw8PJ3S9JoSZA7rdLhsY1Vzfunj0/edit?usp=sharing)

## Overview
This project implements a multi-robot mapping system using ROS2 Humble that enables two carter robots to explore and map an environment collaboratively. The system combines individual SLAM-generated maps from each robot to create a unified, comprehensive map of the environment.

### Key Features
- Frontier-based exploration algorithm for autonomous navigation
- Automatic map expansion and alignment
- Real-time map merging
- Multi-robot coordination
- Visualizations using RViz2

## Dependencies
- ROS2 Humble
- Ubuntu 22.04
- C++17 or higher
- OpenCV 4.5+
- Nav2
- SLAM Toolbox
- tf2_ros

### Required ROS2 Packages
```bash
sudo apt update
sudo apt install ros-humble-turtlebot3
sudo apt install ros-humble-slam-toolbox
sudo apt install ros-humble-nav2*
sudo apt install ros-humble-tf2-ros
```

## Installation

### Build from Source
```bash
# Create a ROS2 workspace
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src

# Clone the repository
git clone https://github.com/Abhishek260101/Warehouse-Atonomous-Robot-System.git

# Install dependencies
sudo rosdep init  # if not initialized before
rosdep update
rosdep install --from-paths src --ignore-src -r -y

# Build the package
cd ~/ros2_ws
colcon build --symlink-install

# Source the workspace
source install/setup.bash
```

## Usage

### Launch the System
1. Start the robots and their core functionalities:
```bash
ros2 launch frontier_explorer complete.launch.xml
```

2. Rviz Visualization
```bash
# For carter1
ros2 run rviz2 rviz2 --ros-args -r /tf:=/carter1/tf -r /tf_static:=/carter1/tf_static

# In another terminal for carter2
ros2 run rviz2 rviz2 --ros-args -r /tf:=/carter2/tf -r /tf_static:=/carter2/tf_static
```

3. To save maps generated by SLAM Toolbox, you can use the map_saver_cli tool from nav2_map_server package.
```bash
# For carter1's map
ros2 run nav2_map_server map_saver_cli -f carter1_map --ros-args -r map:=/carter1/map

# For carter2's map
ros2 run nav2_map_server map_saver_cli -f carter2_map --ros-args -r map:=/carter2/map
```

4. To merge the map save the maps in workspace root and run the map_merger.py script from the map_merger folder


## Project Structure
```
src/frontier_explorer/
├── CMakeLists.txt
├── config
│   └── slam_toolbox_config.yaml
├── include
│   └── frontier_explorer
│       └── frontier_explorer.hpp
├── launch
│   ├── complete.launch.xml
│   └── slam.launch.xml
├── package.xml
├── src
│   ├── frontier_explorer.cpp
│   └── main.cpp
└── test
    └── frontier_explorer_test.cpp

```

## Testing & Coverage
```
colcon build --packages-select frontier_explorer
colcon test --packages-select frontier_explorer --event-handlers console_direct+

lcov --directory build/frontier_explorer --capture --output-file coverage.info
lcov --remove coverage.info '/opt/*' '/usr/*' '*/test/*' --output-file coverage.filtered
genhtml coverage.filtered --output-directory coverage_report
```


## Contributing
1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Team
- Abhishek Avhad
- Kashif Ansari
- Piyush Goenka

## Known Issues
- Map alignment may need manual adjustment in certain scenarios
- Frontier detection sensitivity might need tuning based on environment
- Transform lookups may timeout in large environments

## Future Work
- Implementation of more sophisticated map merging algorithms
- Integration with 3D mapping capabilities
- Enhanced multi-robot coordination strategies

## Acknowledgments
- ROS2 Community
- NVidia community

## Troubleshooting
Common issues and solutions:
1. Transform timeout errors:
   - Increase transform timeout in parameter files
2. Navigation issues:
   - Check Nav2 parameters
   - Verify map resolution
3. SLAM issues:
   - Adjust SLAM Toolbox parameters
   - Check sensor data
